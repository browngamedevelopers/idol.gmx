<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprHappyLeft</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Basic Stats
image_speed = 0.15;
myColor = make_color_rgb(212,242,253);
faith = irandom(20) - irandom(20)
fear = irandom(20) - irandom(20)
fertility = irandom(10) / 10
lifespan = 450 + irandom(900)
name = generate_name()

//

direction = irandom(360)
alarm[0] = irandom(30) + 10
alarm[1] = room_speed*irandom(10);
mspeed = 0

rotate = 0

town_center = instance_nearest(x,y,objTownCenter)

center_range = 600

tx = town_center.x + irandom(center_range*2) - center_range
ty = town_center.y + irandom(center_range*2) - center_range

drawMigrant = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>drawDeath(x,y,myColor);
if(instance_exists(objGUI)){
    if objGUI.active_char == id {
        objGUI.active_char = -1
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(instance_exists(objWeather)){
    if(objWeather.weather[objWeather.curWeather] == sprWinter){
        if(inView(x,y)){
            effect_create_above(ef_smokeup, x, y, 0, make_color_rgb(255,255,255));
        }
    }
}
alarm[1] = room_speed*2;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if rotate = 0 {
    rotate = 5
} else {
    rotate = 0
    mspeed = 3
}

alarm[0] = irandom(30) + 10
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//direction += rotate
depth = -y;
town_center = instance_nearest(x,y,objTownCenter)
if rotate == 0 {
    mp_potential_step_object(tx, ty, mspeed, objEnvironment)
    //move_towards_point(tx,ty,mspeed);
    if point_distance(x,y,tx,ty) &lt; 5 {
        if irandom(10) &lt; 10 {
            tx = town_center.x + irandom(center_range*2) - center_range
            ty = town_center.y + irandom(center_range*2) - center_range
            if(tx&lt;0 || tx&gt;room_width){
                tx = x;
            }
            if(ty&lt;0 || ty&gt;room_height){
                ty = y;
            }
        } else {
            shrine = instance_nearest(x,y,objShrine)
            tx = shrine.x
            ty = shrine.y
        }
    }
}
if(instance_exists(objWeather)){
    if(global.climate == sprWinter){
        lifespan -= 1.75;
    }else if(global.climate == sprSummer){
        lifespan -= 1;
    }else if(global.climate == sprFall){
        lifespan -= 1.45;
    }else{
        lifespan -= 0.75;
    }
}
if lifespan &lt;= 0 {
    score += faith
    instance_destroy()
}

if fear &gt; 0 {
    fear  -= 0.0002
}
if faith &gt; 0 {
    faith -= 0.0001
}

if fear &gt; 30 {
    myColor = make_color_rgb(148,13,143);
    if(x-tx&gt;0){
        sprite_index = sprAngryLeft;
    }else{
        sprite_index = sprAngryRight;
    }
} else if fear&gt;20 &amp;&amp; fear&lt;=40{
    myColor = make_color_rgb(174,230,168);
    if(x-tx&gt;0){
        sprite_index = sprMediumLeft;
    }else{
        sprite_index = sprMediumRight;
    }
} else {
    myColor = make_color_rgb(212,242,253);
    if(x-tx&gt;0){
        sprite_index = sprHappyLeft;
    }else{
        sprite_index = sprHappyRight;
    }
    if faith &gt;= 70 {
        p = instance_create(x,y,objProphet)
        p.name = name
        p.faith = faith
        p.fear = fear
        p.fertility = fertility
        instance_destroy()
    }
}
if(distance_to_object(instance_nearest(x,y,objShrine))&lt;5){
    if(instance_exists(objPlayer)){
        objPlayer.mana += 1
        tx = town_center.x + irandom(center_range*2) - center_range
        ty = town_center.y + irandom(center_range*2) - center_range
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="objPerson">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///This is to be optimized in some way...
if sprite_index = sprAngryLeft || sprite_index = sprAngryRight {
    var convert;
    convert = false
    if other.object_index == objProphet {
        if irandom(1) {
            convert = true
        }
    }
    if convert {
        with(objPerson) {
            if distance_to_object(other) &lt; 240 {
                faith += 2
            }
        }
        p = instance_create(x,y,objProphet)
        p.name = name
        p.faith = 50
        p.fear = fear
        p.fertility = fertility
        instance_destroy()
    } else {
        with(other) {
            lifespan = 1
        }
        with(objPerson) {
            if distance_to_object(other) &lt; 240 {
                faith -= 1
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

//draw_text(x+16,y-16,"FTH:"+string(faith)+"#FR:"+string(fear)+"#+P:"+string(fertility))
var alpha = 1;
if(position_meeting(mouse_x,mouse_y,id)){
    alpha = 0.5;
}
draw_sprite_ext(sprite_index,-1,x,y,1,1,0,myColor,alpha);
draw_set_color(c_white)

if(drawMigrant == true){
    draw_circle(x,y,10,false);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
