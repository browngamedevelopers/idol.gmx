<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1000000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>commands[0] = "Grow"
commands[1] = "Lightning"

active_char = -1

max_faith = 70
max_fear = 70

view_xview[0] = room_width/2 - view_wview[0]/2;
view_yview[0] = room_height/2 - view_hview[0]/2;

global.viewMinX = max(0,room_width/2 - view_wview[0]*1.5);
global.viewMaxX = min(room_width,room_width/2 + view_wview[0]*1.5);
global.viewMinY = max(0,room_height/2 - view_hview[0]*1.5);
global.viewMaxY = min(room_height,room_height/2 + view_hview[0]*1.5);

worldSize = 1;
expand_world(worldSize);
instance_create(0,0,objWeather);
gameOver = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(instance_number(objPerson)&gt;350 &amp;&amp; worldSize == 1){
    worldSize= 2;
    expand_world(worldSize);
}

if(instance_number(objPerson)&gt;700 &amp;&amp; worldSize == 2){
    worldSize = 3;
    expand_world(worldSize);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>vx = view_xview[0]
vy = view_yview[0]
width = 960
height = 640
if(global.Weapon == noone){
    if mouse_check_button_pressed(mb_left) {
        var proph;
        proph = false
        if active_char != -1 {
            if active_char.object_index == objProphet {
                if(active_char.createShrine == noone){
                    //show_message(active_char.createShrine );
                    active_char.tx = mouse_x
                    active_char.ty = mouse_y
                }
                proph = true//wtf?
                
            }
        }
        if !proph {//..oh...wtf?
        active_char = -1
        with(objPerson) {
            if point_distance(x,y, mouse_x, mouse_y) &lt; 20 {
                other.active_char = id
            }
        }
        }
    }
}

if mouse_check_button_pressed(mb_right) {
    active_char = -1
}

border = 60

if mouse_x &lt; vx + 60 {
    view_xview[0] -= 8
}

if mouse_x &gt; vx + width - 60 {
    view_xview[0] += 8
} 

if mouse_y &lt; vy + 60 {
    view_yview[0] -= 8
} 

if mouse_y &gt; vy + height - 60 {
    view_yview[0] += 8
} 

if(view_xview[0]&lt;global.viewMinX){
    view_xview[0] = global.viewMinX;
}
if(view_xview[0]+view_wview[0]&gt; global.viewMaxX){
    view_xview[0] = global.viewMaxX-view_wview[0];
}


if(view_yview[0]&lt;global.viewMinY){
    view_yview[0] = global.viewMinY;
}
if(view_yview[0]+view_hview[0]&gt;global.viewMaxY){
    view_yview[0] = global.viewMaxY-view_hview[0];
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>expand_world(worldSize);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//draw_text(100,100,fps);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>vx = view_xview[0]
vy = view_yview[0]

/*draw_set_alpha(.5)
draw_roundrect_color(vx+10,vy+580,vx+610,vy+640,c_blue, c_blue,1)
draw_circle_colour(vx+40,vy+610,27,c_white,c_white,0)
draw_set_alpha(1)*/

//draw_roundrect_color(vx+80,vy+10,vx+560,vy+60,c_white, c_white,1)
//draw_set_alpha(0.9);
//draw_roundrect_color(vx+38,vy+580,vx+38+(objPlayer.mana/objPlayer.max_mana*444),vy+615,make_color_rgb(122,217,221),make_color_rgb(122,217,221),0)
//draw_set_alpha(1);
draw_sprite(sprHUD,-1,view_xview[0],view_yview[0]);
draw_sprite_part(sprManaBarFull,-1,0,0,max(0,objPlayer.mana/objPlayer.max_mana*462),43,vx+28,vy+576)
draw_set_font(fntSomePx28);
draw_set_halign(fa_center)
draw_set_color(c_black)
draw_text(vx+137,vy+33,instance_number(objPerson))
if instance_number(objPerson) &lt;= 0 &amp;&amp; !gameOver{
    announce_message("Everyone perished...",room_speed*5,gotoMainMenu);
    gameOver = true;
    //highscore_add("NEW", score)
    //show_message("Everyone perished...")
    //room = rmMenu
}
draw_text(vx+814,vy+35,instance_number(objProphet))
draw_text(vx+906,vy+35,instance_number(objShrine))
if instance_number(objShrine) &gt;= 15 &amp;&amp; !gameOver{
    announce_message("15 Shrine constructed! You win!#Score: "+string(score),room_speed*5,gotoMainMenu);
    highscore_add("NEW", score)
    //room = rmMenu
}
if (active_char != -1) {
    image_speed = 0.2
    draw_sprite_ext(active_char.sprite_index,-1,vx+835,vy+515,4,4,0,active_char.myColor,1)
    draw_text(vx+835,vy+358,active_char.name)
    if active_char.faith &gt; 0 {
        draw_sprite_part(sprFaithBarFull,-1,0,0,
        active_char.faith/max_faith*(sprite_get_width(sprFaithBarFull)),
        sprite_get_height(sprFaithBarFull),vx+567,vy+546)
    }
    if active_char.fear &gt; 0 {
        draw_sprite_part(sprFearBarFull,-1,0,0,
        active_char.fear/max_fear*(sprite_get_width(sprFearBarFull)),
        sprite_get_height(sprFearBarFull),vx+595,vy+595)
    }
    draw_set_halign(fa_left)
    //draw_text(vx+578,vy+551,"Faith: "+ string(active_char.faith))
    //draw_text(vx+605,vy+600,"Fear: " + string(active_char.fear))
    
    if active_char.sprite_index == sprProphetLeft || active_char.sprite_index == sprProphetRight {
        var bx, by, bsize, bspr;
        bx = 640+vx
        by = 464+vy
        bsize = 64
        bspr = 0
        if mouse_x &gt; bx &amp;&amp; mouse_x &lt; bx+bsize &amp;&amp; mouse_y &gt; by &amp;&amp; mouse_y &lt; by+bsize {
            bspr = 1
            if mouse_check_button_released(mb_left) &amp;&amp; global.Weapon == noone{ // for sake of best practices, the draw event is expensive relative to the step event...
                if(instance_number(objShrineCreate)&lt;1){
                    instance_create(mouse_x,mouse_y,objShrineCreate);
                }
            }
        }
        draw_sprite(sprShrineButton, bspr, bx, by)
    
    }
    
    //draw_roundrect_color(vx+80,vy+580,vx+600,vy+605,c_white, c_white,1)
    //draw_roundrect_color(vx+80,vy+580,vx+600,vy+605,c_blue, c_blue,0)
    
    //draw_text(vx+80,vy+580,"Faith:"+string(active_char.faith))
    //draw_roundrect_color(vx+80,vy+610,vx+600,vy+635,c_white, c_white,1)
    //draw_roundrect_color(vx+80,vy+610,vx+600,vy+635,c_red, c_red,0)
    //draw_text(vx+80,vy+610,"Fear:"+string(active_char.fear))
    //draw_roundrect_color(vx+38,vy+580,vx+38+(objPlayer.mana/objPlayer.max_mana*444),vy+615,c_blue, c_blue,0)
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="40">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>view_yview[0] += view_hview[0]
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="39">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>view_xview[0] += view_wview[0]
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="38">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>view_yview[0] -= view_hview[0]
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="37">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>view_xview[0] -= view_wview[0]
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="32">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_activate_object(objTree);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
